"use strict";(self["webpackChunkedu_mobile"]=self["webpackChunkedu_mobile"]||[]).push([[846],{5514:function(t,e,i){i.r(e),i.d(e,{default:function(){return Z}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pay-index"},[e("van-cell-group",[e("van-cell",{staticClass:"course-info"},[e("img",{attrs:{src:t.course.courseImgUrl}}),e("div",{staticClass:"price-info"},[e("div",{staticClass:"course-name"},[t._v(t._s(t.course.courseName))]),e("div",{staticClass:"discounts"},[t._v("￥"+t._s(t.course.discounts))])])]),e("van-cell",{staticClass:"acount-info"},[e("div",[t._v("购买信息")]),e("div",{staticClass:"info"},[t._v("购买课程后使用此账号登录【拉钩教育】学习课程")]),e("div",{staticClass:"username"},[t._v("当前账号："+t._s(t.userPhone))])]),e("van-cell",{staticClass:"pay-channel"},[e("div",{staticClass:"title"},[e("p",[t._v("支付方式")]),e("van-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[e("van-cell-group",[e("van-cell",{on:{click:function(e){t.radio=1}},scopedSlots:t._u([{key:"title",fn:function(){return[e("img",{attrs:{src:"http://www.lgstatic.com/lg-app-fed/pay/images/wechat_b787e2f4.png",alt:""}}),e("span",[t._v("微信支付")])]},proxy:!0},{key:"right-icon",fn:function(){return[e("van-radio",{attrs:{name:1}})]},proxy:!0}])}),e("van-cell",{on:{click:function(e){t.radio=2}},scopedSlots:t._u([{key:"title",fn:function(){return[e("img",{attrs:{src:"http://www.lgstatic.com/lg-app-fed/pay/images/ali_ed78fdae.png",alt:""}}),e("span",[t._v("支付宝支付")])]},proxy:!0},{key:"right-icon",fn:function(){return[e("van-radio",{attrs:{name:2}})]},proxy:!0}])})],1)],1)],1),e("van-button",{on:{click:t.handlePay}},[t._v("￥"+t._s(t.course.discounts)+" 立即支付")])],1)],1)],1)},a=[],s=(i(2763),i(9342)),r=(i(1958),i(3332),i(6742),i(6786)),o=(i(541),i(7658),i(9858)),l={inject:{vanField:{default:null}},watch:{value:function(){var t=this.vanField;t&&(t.resetValidation(),t.validateWithTrigger("onChange"))}},created:function(){var t=this.vanField;t&&!t.children&&(t.children=this)}},c=i(2115),d=i(8729),u=function(t){var e=t.parent,i=t.bem,n=t.role;return{mixins:[(0,c.j)(e),l],props:{name:null,value:null,disabled:Boolean,iconSize:[Number,String],checkedColor:String,labelPosition:String,labelDisabled:Boolean,shape:{type:String,default:"round"},bindGroup:{type:Boolean,default:!0}},computed:{disableBindRelation:function(){return!this.bindGroup},isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled},direction:function(){return this.parent&&this.parent.direction||null},iconStyle:function(){var t=this.checkedColor||this.parent&&this.parent.checkedColor;if(t&&this.checked&&!this.isDisabled)return{borderColor:t,backgroundColor:t}},tabindex:function(){return this.isDisabled||"radio"===n&&!this.checked?-1:0}},methods:{onClick:function(t){var e=this,i=t.target,n=this.$refs.icon,a=n===i||(null==n?void 0:n.contains(i));this.isDisabled||!a&&this.labelDisabled?this.$emit("click",t):(this.toggle(),setTimeout((function(){e.$emit("click",t)})))},genIcon:function(){var t=this.$createElement,e=this.checked,n=this.iconSize||this.parent&&this.parent.iconSize;return t("div",{ref:"icon",class:i("icon",[this.shape,{disabled:this.isDisabled,checked:e}]),style:{fontSize:(0,d.N)(n)}},[this.slots("icon",{checked:e})||t(o.Z,{attrs:{name:"success"},style:this.iconStyle})])},genLabel:function(){var t=this.$createElement,e=this.slots();if(e)return t("span",{class:i("label",[this.labelPosition,{disabled:this.isDisabled}])},[e])}},render:function(){var t=arguments[0],e=[this.genIcon()];return"left"===this.labelPosition?e.unshift(this.genLabel()):e.push(this.genLabel()),t("div",{attrs:{role:n,tabindex:this.tabindex,"aria-checked":String(this.checked)},class:i([{disabled:this.isDisabled,"label-disabled":this.labelDisabled},this.direction]),on:{click:this.onClick}},[e])}}},h=(0,r.d)("radio"),p=h[0],f=h[1],v=p({mixins:[u({bem:f,role:"radio",parent:"vanRadio"})],computed:{currentValue:{get:function(){return this.parent?this.parent.value:this.value},set:function(t){(this.parent||this).$emit("input",t)}},checked:function(){return this.currentValue===this.name}},methods:{toggle:function(){this.currentValue=this.name}}}),g=(0,r.d)("radio-group"),b=g[0],m=g[1],y=b({mixins:[(0,c.G)("vanRadio"),l],props:{value:null,disabled:Boolean,direction:String,checkedColor:String,iconSize:[Number,String]},watch:{value:function(t){this.$emit("change",t)}},render:function(){var t=arguments[0];return t("div",{class:m([this.direction]),attrs:{role:"radiogroup"}},[this.slots()])}}),k=(i(7322),i(6631)),C=(i(2443),i(9864)),S=(i(4916),i(5306),i(66)),_=i(4471);const w=t=>(0,_.Z)({method:"POST",url:"/front/order/saveOrder",data:t}),x=t=>(0,_.Z)({method:"POST",url:"/front/pay/saveOrder",data:t}),N=t=>(0,_.Z)({method:"GET",url:"/front/pay/getPayResult",headers:{"content-type":"application/json"},params:t});var P={name:"PayIndex",components:{VanCellGroup:C.Z,VanCell:k.Z,VanRadioGroup:y,VanRadio:v},props:{courseId:{type:[String,Number],require:!0}},created(){this.loadCourse(),this.loadOrder()},data(){return{course:{},radio:1,orderNum:null}},methods:{async loadCourse(){const{data:t}=await(0,S.Yt)({courseId:this.courseId});1===t.state&&(this.course=t.content)},async loadOrder(){const{data:t}=await w({goodsId:this.courseId});1===t.state&&(this.orderNum=t.content.orderNo,console.log("1",t))},async handlePay(){const{data:t}=await x({goodsOrderNo:this.orderNum,channel:1===this.radio?"weChat":"aliPay",returnUrl:"http://edufront.lagounews.com"});window.location.href=t.content.payUrl;const e=setInterval((async()=>{const{data:i}=await N({orderNo:t.content.orderNo});i.content&&2===i.content.status&&(clearInterval(e),s.Z.success("购买成功！"))}),1e3)}},computed:{userPhone(){return this.$store.state.user.organization.replace(/(\d{3})(\d{4})(\d{4})/,"$1****$2")}}},D=P,I=i(1001),$=(0,I.Z)(D,n,a,!1,null,"3ff02100",null),Z=$.exports},9864:function(t,e,i){var n=i(8701),a=i.n(n),s=i(6786),r=i(4771),o=i(1047),l=(0,s.d)("cell-group"),c=l[0],d=l[1];function u(t,e,i,n){var s,l=t("div",a()([{class:[d({inset:e.inset}),(s={},s[o.r5]=e.border,s)]},(0,r.ED)(n,!0)]),[null==i.default?void 0:i.default()]);return e.title||i.title?t("div",{key:n.data.key},[t("div",{class:d("title",{inset:e.inset})},[i.title?i.title():e.title]),l]):l}u.props={title:String,inset:Boolean,border:{type:Boolean,default:!0}},e["Z"]=c(u)},2443:function(t,e,i){i(1958)}}]);